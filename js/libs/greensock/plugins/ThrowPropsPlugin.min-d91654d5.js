/*!
 * VERSION: 0.9.6
 * DATE: 2014-07-17
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * @license Copyright (c) 2008-2014, GreenSock. All rights reserved.
 * ThrowPropsPlugin is a Club GreenSock membership benefit; You must have a valid membership to use
 * this code without violating the terms of use. Visit http://www.greensock.com/club/ to sign up or get more details.
 * This work is subject to the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("plugins.ThrowPropsPlugin",["plugins.TweenPlugin","TweenLite","easing.Ease","utils.VelocityTracker"],function(e,t,n,i){var r,o,a,s,l=function(){e.call(this,"throwProps"),this._overwriteProps.length=0},c=999999999999999,u=1e-10,p=!1,d={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1},f=function(e,t,n,i){for(var r,o,a=t.length,s=0,l=c;--a>-1;)r=t[a],o=r-e,0>o&&(o=-o),l>o&&r>=i&&n>=r&&(s=a,l=o);return t[s]},h=function(e,t,n,i){if("auto"===e.end)return e;n=isNaN(n)?c:n,i=isNaN(i)?-c:i;var r="function"==typeof e.end?e.end(t):e.end instanceof Array?f(t,e.end,n,i):Number(e.end);return r>n?r=n:i>r&&(r=i),{max:r,min:r,unitFactor:e.unitFactor}},g=function(e,t,n){for(var i in t)void 0===e[i]&&i!==n&&(e[i]=t[i]);return e},m=l.calculateChange=function(e,i,r,o){null==o&&(o=.05);var a=i instanceof n?i:i?new n(i):t.defaultEase;return r*o*e/a.getRatio(o)},v=l.calculateDuration=function(e,i,r,o,a){a=a||.05;var s=o instanceof n?o:o?new n(o):t.defaultEase;return Math.abs((i-e)*s.getRatio(a)/r/a)},y=l.calculateTweenDuration=function(e,r,o,a,s,c){if("string"==typeof e&&(e=t.selector(e)),!e)return 0;null==o&&(o=10),null==a&&(a=.2),null==s&&(s=1),e.length&&(e=e[0]||e);var d,f,y,x,b,_,w,T,S,C,N=0,P=9999999999,k=r.throwProps||r,E=r.ease instanceof n?r.ease:r.ease?new n(r.ease):t.defaultEase,M=isNaN(k.checkpoint)?.05:Number(k.checkpoint),A=isNaN(k.resistance)?l.defaultResistance:Number(k.resistance);for(d in k)"resistance"!==d&&"checkpoint"!==d&&"preventOvershoot"!==d&&(f=k[d],"object"!=typeof f&&(S=S||i.getByTarget(e),S&&S.isTrackingProp(d)?f="number"==typeof f?{velocity:f}:{velocity:S.getVelocity(d)}:(x=Number(f)||0,y=x*A>0?x/A:x/-A)),"object"==typeof f&&(void 0!==f.velocity&&"number"==typeof f.velocity?x=Number(f.velocity)||0:(S=S||i.getByTarget(e),x=S&&S.isTrackingProp(d)?S.getVelocity(d):0),b=isNaN(f.resistance)?A:Number(f.resistance),y=x*b>0?x/b:x/-b,_="function"==typeof e[d]?e[d.indexOf("set")||"function"!=typeof e["get"+d.substr(3)]?d:"get"+d.substr(3)]():e[d]||0,w=_+m(x,E,y,M),void 0!==f.end&&(f=h(f,w,f.max,f.min),(c||p)&&(k[d]=g(f,k[d],"end"))),void 0!==f.max&&w>Number(f.max)+u?(C=f.unitFactor||l.defaultUnitFactors[d]||1,T=_>f.max&&f.min!==f.max||x*C>-15&&45>x*C?a+.1*(o-a):v(_,f.max,x,E,M),P>T+s&&(P=T+s)):void 0!==f.min&&Number(f.min)-u>w&&(C=f.unitFactor||l.defaultUnitFactors[d]||1,T=f.min>_&&f.min!==f.max||x*C>-45&&15>x*C?a+.1*(o-a):v(_,f.min,x,E,M),P>T+s&&(P=T+s)),T>N&&(N=T)),y>N&&(N=y));return N>P&&(N=P),N>o?o:a>N?a:N},x=l.prototype=new e("throwProps");return x.constructor=l,l.version="0.9.6",l.API=2,l._autoCSS=!0,l.defaultResistance=100,l.defaultUnitFactors={time:1e3,totalTime:1e3},l.track=function(e,t,n){return i.track(e,t,n)},l.untrack=function(e,t){i.untrack(e,t)},l.isTracking=function(e,t){return i.isTracking(e,t)},l.getVelocity=function(e,t){var n=i.getByTarget(e);return n?n.getVelocity(t):0/0},l._cssRegister=function(){var e=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins.CSSPlugin;if(e){var t=e._internals,n=t._parseToProxy,a=t._setPluginRatio,s=t.CSSPropTween;t._registerComplexSpecialProp("throwProps",{parser:function(e,t,c,u,p,f){f=new l;var h,g,m,v,y,x={},b={},_={},w={},T={},S={};o={};for(m in t)"resistance"!==m&&"preventOvershoot"!==m&&(g=t[m],"object"==typeof g?(void 0!==g.velocity&&"number"==typeof g.velocity?x[m]=Number(g.velocity)||0:(y=y||i.getByTarget(e),x[m]=y&&y.isTrackingProp(m)?y.getVelocity(m):0),void 0!==g.end&&(w[m]=g.end),void 0!==g.min&&(b[m]=g.min),void 0!==g.max&&(_[m]=g.max),g.preventOvershoot&&(S[m]=!0),void 0!==g.resistance&&(h=!0,T[m]=g.resistance)):"number"==typeof g?x[m]=g:(y=y||i.getByTarget(e),x[m]=y&&y.isTrackingProp(m)?y.getVelocity(m):g||0),d[m]&&u._enableTransforms(2===d[m]));v=n(e,x,u,p,f),r=v.proxy,x=v.end;for(m in r)o[m]={velocity:x[m],min:b[m],max:_[m],end:w[m],resistance:T[m],preventOvershoot:S[m]};return null!=t.resistance&&(o.resistance=t.resistance),t.preventOvershoot&&(o.preventOvershoot=!0),p=new s(e,"throwProps",0,0,v.pt,2),p.plugin=f,p.setRatio=a,p.data=v,f._onInitTween(r,o,u._tween),p}})}},l.to=function(e,n,i,l,c){n.throwProps||(n={throwProps:n}),0===c&&(n.throwProps.preventOvershoot=!0),p=!0;var u=new t(e,1,n);return u.render(0,!0,!0),u.vars.css?(u.duration(y(r,{throwProps:o,ease:n.ease},i,l,c)),u._delay&&!u.vars.immediateRender?u.invalidate():a._onInitTween(r,s,u),p=!1,u):(u.kill(),u=new t(e,y(e,n,i,l,c),n),p=!1,u)},x._onInitTween=function(e,t,n){this.target=e,this._props=[],a=this,s=t;var r,o,l,c,u,d,f,v,y,x=n._ease,b=isNaN(t.checkpoint)?.05:Number(t.checkpoint),_=n._duration,w=t.preventOvershoot,T=0;for(r in t)if("resistance"!==r&&"checkpoint"!==r&&"preventOvershoot"!==r){if(o=t[r],"number"==typeof o)u=Number(o)||0;else if("object"!=typeof o||isNaN(o.velocity)){if(y=y||i.getByTarget(e),!y||!y.isTrackingProp(r))throw"ERROR: No velocity was defined in the throwProps tween of "+e+" property: "+r;u=y.getVelocity(r)}else u=Number(o.velocity);d=m(u,x,_,b),v=0,c="function"==typeof e[r],l=c?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():e[r],"object"==typeof o&&(f=l+d,void 0!==o.end&&(o=h(o,f,o.max,o.min),p&&(t[r]=g(o,t[r],"end"))),void 0!==o.max&&f>Number(o.max)?w||o.preventOvershoot?d=o.max-l:v=o.max-l-d:void 0!==o.min&&Number(o.min)>f&&(w||o.preventOvershoot?d=o.min-l:v=o.min-l-d)),this._props[T++]={p:r,s:l,c1:d,c2:v,f:c,r:!1},this._overwriteProps[T]=r}return!0},x._kill=function(t){for(var n=this._props.length;--n>-1;)null!=t[this._props[n].p]&&this._props.splice(n,1);return e.prototype._kill.call(this,t)},x._roundProps=function(e,t){for(var n=this._props,i=n.length;--i>-1;)(e[n[i]]||e.throwProps)&&(n[i].r=t)},x.setRatio=function(e){for(var t,n,i=this._props.length;--i>-1;)t=this._props[i],n=t.s+t.c1*e+t.c2*e*e,t.r&&(n=Math.round(n)),t.f?this.target[t.p](n):this.target[t.p]=n},e.activate([l]),l},!0),_gsScope._gsDefine("utils.VelocityTracker",["TweenLite"],function(e){var t,n,i,r,o=/([A-Z])/g,a={},s={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1},l=document.defaultView?document.defaultView.getComputedStyle:function(){},c=function(e,t,n){var i=(e._gsTransform||a)[t];return i||0===i?i:(e.style[t]?i=e.style[t]:(n=n||l(e,null))?(e=n.getPropertyValue(t.replace(o,"-$1").toLowerCase()),i=e||n.length?e:n[t]):e.currentStyle&&(n=e.currentStyle,i=n[t]),parseFloat(i)||0)},u=e.ticker,p=function(e,t,n){this.p=e,this.f=t,this.v1=this.v2=0,this.t1=this.t2=u.time,this.css=!1,this.type="",this._prev=null,n&&(this._next=n,n._prev=this)},d=function(){var e,n,o=t,a=u.time;if(a-i>=.03)for(r=i,i=a;o;){for(n=o._firstVP;n;)e=n.css?c(o.target,n.p):n.f?o.target[n.p]():o.target[n.p],(e!==n.v1||a-n.t1>.15)&&(n.v2=n.v1,n.v1=e,n.t2=n.t1,n.t1=a),n=n._next;o=o._next}},f=function(e){this._lookup={},this.target=e,this.elem=e.style&&e.nodeType?!0:!1,n||(u.addEventListener("tick",d,null,!1,-100),i=r=u.time,n=!0),t&&(this._next=t,t._prev=this),t=this},h=f.getByTarget=function(e){for(var n=t;n;){if(n.target===e)return n;n=n._next}},g=f.prototype;return g.addProp=function(t,n){if(!this._lookup[t]){var i=this.target,r="function"==typeof i[t],o=r?this._altProp(t):t,a=this._firstVP;this._firstVP=this._lookup[t]=this._lookup[o]=a=new p(o!==t&&0===t.indexOf("set")?o:t,r,a),a.css=this.elem&&(void 0!==this.target.style[a.p]||s[a.p]),a.css&&s[a.p]&&!i._gsTransform&&e.set(i,{x:"+=0"}),a.type=n||a.css&&0===t.indexOf("rotation")?"deg":"",a.v1=a.v2=a.css?c(i,a.p):r?i[a.p]():i[a.p]}},g.removeProp=function(e){var t=this._lookup[e];t&&(t._prev?t._prev._next=t._next:t===this._firstVP&&(this._firstVP=t._next),t._next&&(t._next._prev=t._prev),this._lookup[e]=0,t.f&&(this._lookup[this._altProp(e)]=0))},g.isTrackingProp=function(e){return this._lookup[e]instanceof p},g.getVelocity=function(e){var t,n,i,r=this._lookup[e],o=this.target;if(!r)throw"The velocity of "+e+" is not being tracked.";return t=r.css?c(o,r.p):r.f?o[r.p]():o[r.p],n=t-r.v2,("rad"===r.type||"deg"===r.type)&&(i="rad"===r.type?2*Math.PI:360,n%=i,n!==n%(i/2)&&(n=0>n?n+i:n-i)),n/(u.time-r.t2)},g._altProp=function(e){var t=e.substr(0,3),n=("get"===t?"set":"set"===t?"get":t)+e.substr(3);return"function"==typeof this.target[n]?n:e},f.getByTarget=function(n){var i=t;for("string"==typeof n&&(n=e.selector(n)),n.length&&n!==window&&n[0]&&n[0].style&&!n.nodeType&&(n=n[0]);i;){if(i.target===n)return i;i=i._next}},f.track=function(e,t,n){var i=h(e),r=t.split(","),o=r.length;for(n=(n||"").split(","),i||(i=new f(e));--o>-1;)i.addProp(r[o],n[o]||n[0]);return i},f.untrack=function(e,n){var i=h(e),r=(n||"").split(","),o=r.length;if(i){for(;--o>-1;)i.removeProp(r[o]);i._firstVP&&n||(i._prev?i._prev._next=i._next:i===t&&(t=i._next),i._next&&(i._next._prev=i._prev))}},f.isTracking=function(e,t){var n=h(e);return n?!t&&n._firstVP?!0:n.isTrackingProp(t):!1},f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define(["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),module.exports=t())}("ThrowPropsPlugin");